openapi: 3.0.0
info:
  description: |
    API для мобильного приложения ЕАИС
  version: "1.0.0-oas3"
  title: Мост кинотека-еаис
  contact:
    email: ah@fond-kino.ru
tags:
  - name: eais
    description: ЕАИС
  #Все методы вызывать так /pub.aspx?auth_token=<auth_token>&method=<имя мнетода>&<параметры>
paths:
  # *******************************************************************************************************************
  /auth:
    post:
      summary: Выполняет процедуру аутентификации и возвращает объект пользователя
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/User'
        '401': 
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500': 
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: 'ekb-common-1.0.0.yaml#/components/schemas/LoginRequest'
        description: Объект запроса
        required: true
  # *******************************************************************************************************************
  /authGuest:
    post:
      summary: Выполняет процедуру аутентификации и возвращает объект пользователя для Гостя
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/User'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: 'ekb-common-1.0.0.yaml#/components/schemas/LoginRequestGuest'
        description: Объект запроса
        required: true
  # *******************************************************************************************************************
  /getFilmAnalog1:
    get:
      summary: Возвращает фильмы-аналоги для заданного фильма в заданном периоде
      parameters:
        - in: path
          name: idFilm
          schema:
            type: string
          required: true
          description: ПУ фильма
        - in: path
          name: idInterval
          schema:
            type: string
          required: true
          description: ID интервала - значение атрибута "id" из результата запроса "getFilmAnalogInterval"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Film'
        '401': 
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500': 
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  # *******************************************************************************************************************
  /getFilmAnalogInterval:
    get:
      summary: Возвращает список доступных интервалов для конкретного фильма
      parameters:
        - in: path
          name: idFilm
          schema:
            type: string
          required: true
          description: ПУ фильма
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/AnalogInterval'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  # *******************************************************************************************************************
  /storeMyFilms:
    post:
      summary: Сохраняет добавленные вручную ПУ для аналогов
      responses:
        '200':
          description: Если сохранение прошло без ошибок, то возвращается этот объект
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    default: 'OK'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: 'ekb-common-1.0.0.yaml#/components/schemas/AnalogManualFolder'
        description: Объект запроса
        required: true
  # *******************************************************************************************************************
  /resetMyFilms:
    post:
      summary: Очищает папку добавленных вручную ПУ для аналогов
      responses:
        '200':
          description: Если очистка прошла без ошибок, то возвращается этот объект
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    default: 'OK'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                folder:
                  type: string
                  description: Название папки, которую нужно очистить
        description: Объект запроса
        required: true
  # *******************************************************************************************************************
  /weekends:
    get:
      summary: Возвращает список уикендов за выбранный год
      parameters:
        - in: path
          name: year
          schema:
            type: string
          required: true
          description: Год в формате YYYY
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Weekend'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'

  # *******************************************************************************************************************
  /search:
    get:
      summary: Возвращает список фильмов
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: query
          schema:
            type: string
          description: Строка поиска по названию(рус/англ) или по номеру ПУ (ищет вхождение не зависимо от регистра)
        - in: path
          name: sort
          schema:
            type: string
          description: по какому полю сортировать money|tickets|seances. Если не указано и указан query, то сортируется по дате выхода в прокат, если query не указан, то по money
        - in: path
          name: onlyFilmsOlderThenTheNoon
          schema:
            type: string
          description: 1-если фильм вышел в прокат сегодня и еще не настало 12:00, но он не будем возвращаться в результат
        - in: path
          name: moviesOnly
          schema:
            type: string
          description: 1-возвращать только фильмы которые в прокате, если последний сеанс фильма был более 1 суток назад, то фильм не будем возвращаться в результат
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Film'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  # *******************************************************************************************************************
  /top:
    get:
      summary: Возвращает топ фильмов
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: region
          schema:
            type: string
          description: Фильтр по коду региона, можно передавать список кодов через зпт
        - in: path
          name: sort
          schema:
            type: string
          description: по какому полю сортировать money|tickets|seances. Если не указано и указан query, то сортируется по дате выхода в прокат, если query не указан, то по money
        - in: path
          name: qmode
          schema:
            type: string
          description: 1-дополнительно вычисляет поля sumByDateFinish, но похоже это уже  не используется
        - in: path
          name: onlyFilmsOlderThenTheNoon
          schema:
            type: string
          description: 1-если фильм вышел в прокат сегодня и еще не настало 12:00, но он не будем возвращаться в результат
        - in: path
          name: withMyFilms
          schema:
            type: string
          description: 1-возвращает дополнительно фильмы, которые выбраны вручную пользователем
        - in: path
          name: fkonly
          schema:
            type: string
          description: 1-возврвщает данные только по поддержанным кинозалам (доступно только пользователям с грантом 210)
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Film'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  # *******************************************************************************************************************
  /getGeneralStats:
    get:
      summary: Возвращает основную статистику по фильму с детализацией до 1 дня (нет ограничения доступа)
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: id
          schema:
            type: string
          description: Фильтр по фильму, передавать ПУ
        - in: path
          name: region
          schema:
            type: string
          description: Фильтр по коду региона, можно передавать список кодов через зпт
        - in: path
          name: year
          schema:
            type: string
          description: Год в формате YYYY, если нужно получить статистику за год с группировкой по месяцам
        - in: path
          name: groupByWeekend
          schema:
            type: string
          description: true-тогда данные будут сгруппированы по уикендам и необходимо передать параметры periodStart, periodEnd
        - in: path
          name: groupBy
          schema:
            type: integer
          description: Кол-во дней по которым нужно сгруппирповать статистику на выходе
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода, за который запрашивается статистика
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода, за который запрашивается статистика
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Sales'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  # *******************************************************************************************************************
  /getFilmStats:
    get:
      summary: Возвращает статистику по фильму с детализацией до 1 часа (возвращет только данные доступные текущему пользователю)
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: id
          schema:
            type: string
          description: Фильтр по фильму, передавать ПУ
        - in: path
          name: region
          schema:
            type: string
          description: Фильтр по коду региона, можно передавать список кодов через зпт
        - in: path
          name: year
          schema:
            type: string
          description: Год в формате YYYY, если нужно получить статистику за год с группировкой по месяцам
        - in: path
          name: groupByWeekend
          schema:
            type: string
          description: true-тогда данные будут сгруппированы по уикендам и необходимо передать параметры periodStart, periodEnd
        - in: path
          name: groupBy
          schema:
            type: integer
          description: Кол-во часов по которым нужно сгруппирповать статистику на выходе
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода, за который запрашивается статистика
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода, за который запрашивается статистика
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Sales'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  # *******************************************************************************************************************
  /getUserFilms:
    get:
      summary: Возвращает топ фильмов для текущего пользователя (только фильмы дистрибьютора или кинотеатра)
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: region
          schema:
            type: string
          description: Фильтр по коду региона, можно передавать список кодов через зпт
        - in: path
          name: sort
          schema:
            type: string
          description: по какому полю сортировать money|tickets|seances. Если не указано и указан query, то сортируется по дате выхода в прокат, если query не указан, то по money
        - in: path
          name: qmode
          schema:
            type: string
          description: 1-дополнительно вычисляет поля sumByDateFinish, но похоже это уже  не используется
        - in: path
          name: onlyFilmsOlderThenTheNoon
          schema:
            type: string
          description: 1-если фильм вышел в прокат сегодня и еще не настало 12:00, но он не будем возвращаться в результат
        - in: path
          name: withMyFilms
          schema:
            type: string
          description: 1-возвращает дополнительно фильмы, которые выбраны вручную пользователем
        - in: path
          name: fkonly
          schema:
            type: string
          description: 1-возврвщает данные только по поддержанным кинозалам (доступно только пользователям с грантом 210)
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Film'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  # *******************************************************************************************************************
  /searchFilms:
    get:
      summary: Возвращает список фильмов только по фильмам текущего пользователя
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: query
          schema:
            type: string
          description: Строка поиска по названию(рус/англ) или по номеру ПУ (ищет вхождение не зависимо от регистра)
        - in: path
          name: sort
          schema:
            type: string
          description: по какому полю сортировать money|tickets|seances. Если не указано и указан query, то сортируется по дате выхода в прокат, если query не указан, то по money
        - in: path
          name: onlyFilmsOlderThenTheNoon
          schema:
            type: string
          description: 1-если фильм вышел в прокат сегодня и еще не настало 12:00, но он не будем возвращаться в результат
        - in: path
          name: moviesOnly
          schema:
            type: string
          description: 1-возвращать только фильмы которые в прокате, если последний сеанс фильма был более 1 суток назад, то фильм не будем возвращаться в результат
        - in: path
          name: idCinema
          schema:
            type: string
          description: ID кинотеатра, по которому искать фильмы (для киносетей)

      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Film'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  # *******************************************************************************************************************
  /getCinemasForFilm:
    get:
      summary: Возвращает список кинотеатров, которые катали данный фильм
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: query
          schema:
            type: string
          description: Строка поиска по названию(рус/англ) или по номеру ПУ (ищет вхождение не зависимо от регистра)
        - in: path
          name: id
          schema:
            type: string
          description: Фильтр по фильму, передавать ПУ
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
        - in: path
          name: query
          schema:
            type: string
          description: Строка поиска по названию или по ID кинотеатра
        - in: path
          name: owntype
          schema:
            type: string
          description: Фильтр по форме собственности
        - in: path
          name: fksupported
          schema:
            type: string
          description: 1-отдавать данные только по поддержанным кинотеатрам
        - in: path
          name: mintps
          schema:
            type: number
          description: Фильтр по TicketsPerSession минимальное значение
        - in: path
          name: maxtps
          schema:
            type: number
          description: Фильтр по TicketsPerSession максимальное значение
        - in: path
          name: minmps
          schema:
            type: number
          description: Фильтр по MoneyPerSession  минимальное значение
        - in: path
          name: maxmps
          schema:
            type: number
          description: Фильтр по MoneyPerSession максимальное значение
        - in: path
          name: minmph
          schema:
            type: number
          description: Фильтр по MoneyPerHall  минимальное значение
        - in: path
          name: maxmph
          schema:
            type: number
          description: Фильтр по MoneyPerHall максимальное значение
        - in: path
          name: mintpc
          schema:
            type: number
          description: Фильтр по TicketsPerCinema  минимальное значение
        - in: path
          name: maxtpc
          schema:
            type: number
          description: Фильтр по TicketsPerCinema максимальное значение
        - in: path
          name: minmpc
          schema:
            type: number
          description: Фильтр по MoneyPerCinema  минимальное значение
        - in: path
          name: maxmpc
          schema:
            type: number
          description: Фильтр по MoneyPerCinema максимальное значение

      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/CinemaStat'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  # *******************************************************************************************************************
  /getCinemaStats:
    get:
      summary: Возвращает статистику по кинотеатру
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: id
          schema:
            type: string
          description: Фильтр по кинотеатру, передавать ID кинотеатра
        - in: path
          name: year
          schema:
            type: string
          description: Год в формате YYYY, если нужно получить статистику за год с группировкой по месяцам
        - in: path
          name: groupByWeekend
          schema:
            type: string
          description: true-тогда данные будут сгруппированы по уикендам и необходимо передать параметры periodStart, periodEnd
        - in: path
          name: groupBy
          schema:
            type: integer
          description: Кол-во дней по которым нужно сгруппирповать статистику на выходе
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода, за который запрашивается статистика
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода, за который запрашивается статистика

      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Sales'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'


  # *******************************************************************************************************************
  /getCinemaRegionStats:
    get:
      summary: Возвращает статистику по регионам
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода, за который запрашивается статистика
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода, за который запрашивается статистика

      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Sales'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'

  # *******************************************************************************************************************
  /getFilmRegionStats:
    get:
      summary: Возвращает статистику по регионам для фильма
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: id
          schema:
            type: string
          description: ПУ фильма
        - in: path
          name: region
          schema:
            type: string
          description: Список кодов регионов через зпт
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода, за который запрашивается статистика
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода, за который запрашивается статистика

      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/FilmWithRegionStat'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
  /generateReport:
    get:
      summary: Возвращает сводный отчет
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: id
          schema:
            type: string
          description: ПУ фильма
        - in: path
          name: region
          schema:
            type: string
          description: Список кодов регионов через зпт
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода, за который запрашивается статистика
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода, за который запрашивается статистика

      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Sales'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'


  # *******************************************************************************************************************
  /getRegions:
    get:
      summary: Возвращает справочник регионов
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Region'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'

  # *******************************************************************************************************************
  /getCinemas:
    get:
      summary: Возвращает справочник кинотеатров, результат фильтруется в зависимости от ролей пользователя
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
        - in: path
          name: id
          schema:
            type: integer
          description: ID кинотеатра
        - in: path
          name: query
          schema:
            type: string
          description: Строка поиска по названию или по ID кинотеатра
        - in: path
          name: owntype
          schema:
            type: string
          description: Фильтр по форме собственности
        - in: path
          name: fksupported
          schema:
            type: string
          description: 1-отдавать данные только по поддержанным кинотеатрам
        - in: path
          name: mintps
          schema:
            type: number
          description: Фильтр по TicketsPerSession минимальное значение
        - in: path
          name: maxtps
          schema:
            type: number
          description: Фильтр по TicketsPerSession максимальное значение
        - in: path
          name: minmps
          schema:
            type: number
          description: Фильтр по MoneyPerSession  минимальное значение
        - in: path
          name: maxmps
          schema:
            type: number
          description: Фильтр по MoneyPerSession максимальное значение
        - in: path
          name: minmph
          schema:
            type: number
          description: Фильтр по MoneyPerHall  минимальное значение
        - in: path
          name: maxmph
          schema:
            type: number
          description: Фильтр по MoneyPerHall максимальное значение
        - in: path
          name: mintpc
          schema:
            type: number
          description: Фильтр по TicketsPerCinema  минимальное значение
        - in: path
          name: maxtpc
          schema:
            type: number
          description: Фильтр по TicketsPerCinema максимальное значение
        - in: path
          name: minmpc
          schema:
            type: number
          description: Фильтр по MoneyPerCinema  минимальное значение
        - in: path
          name: maxmpc
          schema:
            type: number
          description: Фильтр по MoneyPerCinema максимальное значение
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/CinemaStat'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'


  # *******************************************************************************************************************
  /getDemonstrators:
    get:
      summary: Возвращает справочник кинотеатров, результат фильтруется в зависимости от ролей пользователя
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: region
          schema:
            type: string
          description: ID региона
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/CinemaStat'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'

  /getFilmsForCinema:
    summary: Возвращает справочник кинотеатров, результат фильтруется в зависимости от ролей пользователя
    parameters:
      - in: path
        name: periodStart
        schema:
          type: string
        description: Начало периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
      - in: path
        name: periodEnd
        schema:
          type: string
        description: Окончание периода за который собранны данные в полях sum, quantity, sessions, moneyPerSession, ticketsPerSession
      - in: path
        name: id
        schema:
          type: integer
        description: ID кинотеатра
      - in: path
        name: idSroom
        schema:
          type: integer
        description: ID кинозала
      - in: path
        name: onlyFilmsOlderThenTheNoon
        schema:
          type: string
        description: 1-если фильм вышел в прокат сегодня и еще не настало 12:00, но он не будем возвращаться в результат
      - in: path
        name: moviesOnly
        schema:
          type: string
        description: 1-возвращать только фильмы которые в прокате, если последний сеанс фильма был более 1 суток назад, то фильм не будем возвращаться в результат
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Film'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'

  # *******************************************************************************************************************
  /getFilmForCinemaStats:
    get:
      summary: Возвращает основную статистику по фильму, по кинотеатру с детализацией до 1 часа
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: idFilm
          schema:
            type: string
          description: ПУ филма
        - in: path
          name: idCinema
          schema:
            type: integer
          description: ID кинотеатра
        - in: path
          name: year
          schema:
            type: string
          description: Год в формате YYYY, если нужно получить статистику за год с группировкой по месяцам
        - in: path
          name: groupByWeekend
          schema:
            type: string
          description: true-тогда данные будут сгруппированы по уикендам и необходимо передать параметры periodStart, periodEnd
        - in: path
          name: groupBy
          schema:
            type: integer
          description: Кол-во дней по которым нужно сгруппирповать статистику на выходе
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода, за который запрашивается статистика
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода, за который запрашивается статистика
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Sales'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'


  # *******************************************************************************************************************
  /searchCinemas:
    get:
      summary: Возвращает список кинотеатров
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: query
          schema:
            type: string
          description: Строка поиска по названию и по ID
        - in: path
          name: owntype
          schema:
            type: string
          description: Строка поиска по виду собственности
        - in: path
          name: fksupported
          schema:
            type: string
          description: 1-только по поддержанным ФК
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/CinemaStat'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'


  # *******************************************************************************************************************
  /getOwntypes:
    get:
      summary: Возвращает справочник видов собственности
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Owntype'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'


  # *******************************************************************************************************************
  /getDistributors:
    get:
      summary: Возвращает справочник видов собственности
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Distributor'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'

  # *******************************************************************************************************************
  /getDynamic:
    get:
      summary: Динамика
      parameters:
        - in: path
          name: currId
          schema:
            type: integer
          description: Код валюты в которой будут возвращаться все суммы, 0-руб, 1-доллар США, 2-евро, по умолчанию 0.
        - in: path
          name: rlocale
          schema:
            type: string
          description: В какой локали возвращать данные, 'ru'-русский, 'en'-английский, по умолчанию 'ru'
        - in: path
          name: periodStart
          schema:
            type: string
          description: Начало периода, за который запрашивается статистика
        - in: path
          name: periodEnd
          schema:
            type: string
          description: Окончание периода, за который запрашивается статистика
        - in: path
          name: id
          schema:
            type: integer
          description: ID кинотеатра
        - in: path
          name: topmode
          schema:
            type: string
          description: Сортировать 0-по orGrow, 1-по npGrow, 2-по rcGrow, 3-по rrGrow
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Dynamic'
        '401':
          description: Ошибка аутентификации
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'
        '500':
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: 'ekb-common-1.0.0.yaml#/components/schemas/Error'

# *****************************************************************************************************************************
servers:
  - url: 'https://ekinobilet.ru/ekbapi'
    description: боевой сервер
  - url: 'https://ekinobilet.ru/ekbapi2'
    description: тестовый сервер

